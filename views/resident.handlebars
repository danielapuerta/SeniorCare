<!-- Modal for Blood Sugar Levels -->
<div class="modal fade" id="addBloodSugarLevelsModal" tabindex="-1" role="dialog" aria-labelledby="addBloodSugarLevels" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addBloodSugarLevelsLabel">Add Blood Sugar Levels</h5>
        <button type="button" id="close_button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container">
          <div class="row justify-content-center">
              <div >
                <form id="residentForm" class="form-horizontal">
                        <fieldset>

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="bloodSugarLevelsInput">Blood Sugar Levels</label>
                                <div class="col-md-4">
                                    <input id="bloodSugarLevelsInput" name="bloodSugarLevels" type="text" placeholder="140 mg/dL" class="form-control input-md">
                                </div>
                            </div>
                        </fieldset>
                    </form>
              </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button id="addBloodSugarLevels_Button" type="button" class="btn btn-primary">Confirm</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal for Body Temperature -->
<div class="modal fade" id="addBodyTemperatureModal" tabindex="-1" role="dialog" aria-labelledby="addBloodSugarLevels" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addBodyTemperatureLabel">Add Body Temperature</h5>
        <button type="button" id="close_button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container">
          <div class="row justify-content-center">
              <div >
                <form id="residentForm" class="form-horizontal">
                        <fieldset>

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="bodyTemperatureInput">Body Temperature</label>
                                <div class="col-md-4">
                                    <input id="bodyTemperatureInput" name="bodyTemperature" type="text" placeholder="36°C" class="form-control input-md">
                                </div>
                            </div>
                        </fieldset>
                    </form>
              </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button id="addBodyTemperature_Button" type="button" class="btn btn-primary">Confirm</button>
      </div>
    </div>
  </div>
</div>

{{!-- Container for the records of: BloodPressureSugar, Temperature and Falls--}}
<div class="container">
	<div class="row">
		<div>
    	 <div class="well profile">
            <div >
                <div >
                    <h2>{{residentObj.Name}}</h2>
                    <p><strong>Age: </strong> {{residentObj.age}} </p>
                    <p><strong>Room: </strong> {{residentObj.RoomNum}} </p>
                </div>             
            </div>            
            <div class="row justify-content-center">
                <div class="col-md-4 emphasis">                    
                    <p><strong>Blood Sugar Level - mg/dL</strong></p>
                    <ul class="list-group">
                        
                        {{#each bloodSugarLevelObjs}}
                            <li class="list-group-item">{{this.dataValues.Levels}}</li>  
                        {{/each}}
                        
                    </ul>
                    <button class="btn btn-success btn-block" data-bs-toggle="modal" data-bs-target="#addBloodSugarLevelsModal"><span class="fa fa-plus-circle"></span> </button>
                </div>
                <div class="col-md-4 emphasis">                  
                    <p><strong>Body Temperature - °C</strong></p>
                    <ul class="list-group">
                       {{#each bodyTemperatureObjs}}
                            <li class="list-group-item">{{this.dataValues.BodyTemperature}}</li>  
                        {{/each}}
                    </ul>
                    <button class="btn btn-success btn-block" data-bs-toggle="modal" data-bs-target="#addBodyTemperatureModal"><span class="fa fa-plus-circle"></span> </button>
                </div>
                <div class="col-md-4 emphasis"               
                    <p><strong>Last Fall</strong></p>
                     <ul class="list-group">
                        <li class="list-group-item">12-06-2022 01:30</li>
                        <li class="list-group-item">12-06-2022 01:30</li>
                        <li class="list-group-item">12-06-2022 01:30</li>
                        <li class="list-group-item">12-06-2022 01:30</li>
                        <li class="list-group-item">12-06-2022 01:30</li>
                    </ul>
                    <button class="btn btn-success btn-block"><span class="fa fa-plus-circle"></span> </button>
                </div>
            </div>
    	 </div>                 
		</div>
	</div>
</div>



<script>
    $('#addBloodSugarLevels_Button').click(function(e){
        e.preventDefault();
        var bloodSugarLevels = {
            Levels : $('input[name=bloodSugarLevels]').val(),
            PatientId: window.location.href.substring(window.location.href.lastIndexOf('/') + 1)
        }
        $.ajax({
        type: "POST",
        url: "/api/addBloodSugarLevels",
        data: bloodSugarLevels,
        success: function( msg ) {
            var id = msg.PatientId;
            console.log('server response is', msg.status);
            window.location.href = '/ResidentProfile/' + bloodSugarLevels.PatientId;
        },
        });
    })
    $('#addBodyTemperature_Button').click(function(e){
        e.preventDefault();
        console.log("test");
        var bodyTemperature = {
            BodyTemperature : $('input[name=bodyTemperature]').val(),
            PatientId: window.location.href.substring(window.location.href.lastIndexOf('/') + 1)
        }
        $.ajax({
        type: "POST",
        url: "/api/addBodyTemperature",
        data: bodyTemperature,
        success: function( msg ) {
            var id = msg.PatientId;
            console.log('server response is', msg.status);
            window.location.href = '/ResidentProfile/' + bodyTemperature.PatientId;
        },
        });
    })







</script>
